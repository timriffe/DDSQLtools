<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Downloading UNPD data into R • DDSQLtools</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Downloading UNPD data into R">
<meta property="og:description" content="DDSQLtools">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">DDSQLtools</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">01.02.000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/Downloading-UNPD-data-into-R.html">Downloading UNPD data into R</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/timriffe/DDSQLtools/">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Downloading UNPD data into R</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/timriffe/DDSQLtools/blob/master/vignettes/Downloading-UNPD-data-into-R.Rmd"><code>vignettes/Downloading-UNPD-data-into-R.Rmd</code></a></small>
      <div class="hidden name"><code>Downloading-UNPD-data-into-R.Rmd</code></div>

    </div>

    
    
<p><code>DDSQLtools</code> is a package that aims to make downloading data from the UNPD SQL API into R easy. In this vignette we will discuss the different ways in which you can explore and download this data. Make sure you have the latest version of <code>DDSQLtools</code> by installing it from Github:</p>
<div class="sourceCode" id="cb1"><html><body><pre class="r"><span class="kw pkg">devtools</span><span class="kw ns">::</span><span class="fu">install_github</span>(<span class="st">"timriffe/DDSQLtools"</span>)</pre></body></html></div>
<p>and load the package:</p>
<div class="sourceCode" id="cb2"><html><body><pre class="r"><span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="no">DDSQLtools</span>)</pre></body></html></div>
<div id="quick-recipes" class="section level2">
<h2 class="hasAnchor">
<a href="#quick-recipes" class="anchor"></a>Quick recipes</h2>
<p>If you’re already familiar with concepts from the UNPD SQL API, then you’ll only have to interact with the <code>get_recorddata</code> function. For example, here’s how to get data on population by age and sex for Egypt with different options:</p>
<div class="sourceCode" id="cb3"><html><body><pre class="r">
<span class="no">egypt_str</span> <span class="kw">&lt;-</span> <span class="fu"><a href="../reference/get_recorddata.html">get_recorddata</a></span>(<span class="kw">dataProcessIds</span> <span class="kw">=</span> <span class="st">"Census"</span>,
                            <span class="kw">indicatorTypeIds</span> <span class="kw">=</span> <span class="st">"Population by age and sex"</span>,
                            <span class="kw">locIds</span> <span class="kw">=</span> <span class="st">"Egypt"</span>,
                            <span class="kw">locAreaTypeIds</span> <span class="kw">=</span> <span class="st">"Whole area"</span>,
                            <span class="kw">subGroupIds</span> <span class="kw">=</span> <span class="st">"Total or All groups"</span>,
                            <span class="kw">isComplete</span> <span class="kw">=</span> <span class="st">"Abridged"</span>)</pre></body></html></div>
<p><code>get_recorddata</code> accepts either string names or codes. For example, this will return the same thing as above:</p>
<div class="sourceCode" id="cb4"><html><body><pre class="r">
<span class="no">egypt_num</span> <span class="kw">&lt;-</span> <span class="fu"><a href="../reference/get_recorddata.html">get_recorddata</a></span>(<span class="kw">dataProcessIds</span> <span class="kw">=</span> <span class="fl">2</span>,
                            <span class="kw">indicatorTypeIds</span> <span class="kw">=</span> <span class="fl">8</span>,
                            <span class="kw">locIds</span> <span class="kw">=</span> <span class="fl">818</span>,
                            <span class="kw">locAreaTypeIds</span> <span class="kw">=</span> <span class="fl">2</span>,
                            <span class="kw">subGroupIds</span> <span class="kw">=</span> <span class="fl">2</span>,
                            <span class="kw">isComplete</span> <span class="kw">=</span> <span class="fl">0</span>)</pre></body></html></div>
<p>Note that <strong>using numeric codes is faster than using string names because we don’t have to make code translations behind the scenes</strong> (if you’re unsure what these codes mean, please refer to the section <code>Exploring the UNPD SQL API from R</code> below). Here are a few other examples:</p>
<div id="population-by-age-and-sex-with-census-data" class="section level4">
<h4 class="hasAnchor">
<a href="#population-by-age-and-sex-with-census-data" class="anchor"></a>Population by age and sex with census data</h4>
<div class="sourceCode" id="cb5"><html><body><pre class="r"><span class="no">china</span> <span class="kw">&lt;-</span> <span class="fu"><a href="../reference/get_recorddata.html">get_recorddata</a></span>(<span class="kw">dataProcessIds</span> <span class="kw">=</span> <span class="st">"Census"</span>,
                        <span class="kw">indicatorTypeIds</span> <span class="kw">=</span> <span class="st">"Population by age and sex"</span>,
                        <span class="kw">locIds</span> <span class="kw">=</span> <span class="st">"China"</span>,
                        <span class="kw">locAreaTypeIds</span> <span class="kw">=</span> <span class="st">"Whole area"</span>,
                        <span class="kw">subGroupIds</span> <span class="kw">=</span> <span class="st">"Total or All groups"</span>,
                        <span class="kw">isComplete</span> <span class="kw">=</span> <span class="st">"Abridged"</span>)
<span class="co">#&gt; [1] "http://24.239.36.16:9654/un3/api/locations?"</span>
<span class="co">#&gt; [1] "http://24.239.36.16:9654/un3/api/indicatortypes?"</span>
<span class="co">#&gt; [1] "http://24.239.36.16:9654/un3/api/subgroups?"</span>
<span class="co">#&gt; [1] "http://24.239.36.16:9654/un3/api/locareatypes?indicatorTypeIds=8&amp;isComplete=0&amp;locIds=156"</span>
<span class="co">#&gt; [1] "http://24.239.36.16:9654/un3/api/dataprocesstypes?indicatorTypeIds=8&amp;isComplete=0&amp;locIds=156"</span>
<span class="co">#&gt; If you run the same query again, use the one below (faster): </span>
<span class="co">#&gt;   get_recorddata(dataProcessIds = 2, indicatorTypeIds = 8, isComplete = 0, locIds = 156, locAreaTypeIds = 2, subGroupIds = 2)[1] "http://24.239.36.16:9654/un3/api/structureddatarecords?dataProcessIds=2&amp;indicatorTypeIds=8&amp;isComplete=0&amp;locIds=156&amp;locAreaTypeIds=2&amp;subGroupIds=2"</span>

<span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span>(<span class="no">china</span>)
<span class="co">#&gt;                          IndicatorName LocName PK_StructuredDataID LocTypeName</span>
<span class="co">#&gt; 1 Population by age and sex - abridged   China           117433293     Country</span>
<span class="co">#&gt; 2 Population by age and sex - abridged   China           117434176     Country</span>
<span class="co">#&gt; 3 Population by age and sex - abridged   China           123607584     Country</span>
<span class="co">#&gt; 4 Population by age and sex - abridged   China           117434397     Country</span>
<span class="co">#&gt; 5 Population by age and sex - abridged   China           123607585     Country</span>
<span class="co">#&gt; 6 Population by age and sex - abridged   China           117433832     Country</span>
<span class="co">#&gt;        RegName AreaName LocAreaTypeName                 SubGroupTypeName</span>
<span class="co">#&gt; 1 Eastern Asia     Asia      Whole area Total / All groups / Whole group</span>
<span class="co">#&gt; 2 Eastern Asia     Asia      Whole area Total / All groups / Whole group</span>
<span class="co">#&gt; 3 Eastern Asia     Asia      Whole area Total / All groups / Whole group</span>
<span class="co">#&gt; 4 Eastern Asia     Asia      Whole area Total / All groups / Whole group</span>
<span class="co">#&gt; 5 Eastern Asia     Asia      Whole area Total / All groups / Whole group</span>
<span class="co">#&gt; 6 Eastern Asia     Asia      Whole area Total / All groups / Whole group</span>
<span class="co">#&gt;   SubGroupID1 SubGroupCombinationID SubGroupTypeSortOrder IndicatorShortName</span>
<span class="co">#&gt; 1           2                     0                     3        Population5</span>
<span class="co">#&gt; 2           2                     0                     3        Population5</span>
<span class="co">#&gt; 3           2                     0                     3        Population5</span>
<span class="co">#&gt; 4           2                     0                     3        Population5</span>
<span class="co">#&gt; 5           2                     0                     3        Population5</span>
<span class="co">#&gt; 6           2                     0                     3        Population5</span>
<span class="co">#&gt;   DataCatalogID DataProcessTypeID DataProcessType DataProcess   DataCatalogName</span>
<span class="co">#&gt; 1          1619                 2          Census      Census China 1982 Census</span>
<span class="co">#&gt; 2          1619                 2          Census      Census China 1982 Census</span>
<span class="co">#&gt; 3          1619                 2          Census      Census China 1982 Census</span>
<span class="co">#&gt; 4          1619                 2          Census      Census China 1982 Census</span>
<span class="co">#&gt; 5          1619                 2          Census      Census China 1982 Census</span>
<span class="co">#&gt; 6          1619                 2          Census      Census China 1982 Census</span>
<span class="co">#&gt;   DataCatalogShortName ReferencePeriod ReferenceYearStart ReferenceYearEnd</span>
<span class="co">#&gt; 1          1982 Census            1982               1982             1982</span>
<span class="co">#&gt; 2          1982 Census            1982               1982             1982</span>
<span class="co">#&gt; 3          1982 Census            1982               1982             1982</span>
<span class="co">#&gt; 4          1982 Census            1982               1982             1982</span>
<span class="co">#&gt; 5          1982 Census            1982               1982             1982</span>
<span class="co">#&gt; 6          1982 Census            1982               1982             1982</span>
<span class="co">#&gt;   ReferenceYearMid       FieldWorkStart         FieldWorkEnd FieldWorkMiddle</span>
<span class="co">#&gt; 1           1982.5 7/1/1982 12:00:00 AM 7/1/1982 12:00:00 AM        1982.499</span>
<span class="co">#&gt; 2           1982.5 7/1/1982 12:00:00 AM 7/1/1982 12:00:00 AM        1982.499</span>
<span class="co">#&gt; 3           1982.5 7/1/1982 12:00:00 AM 7/1/1982 12:00:00 AM        1982.499</span>
<span class="co">#&gt; 4           1982.5 7/1/1982 12:00:00 AM 7/1/1982 12:00:00 AM        1982.499</span>
<span class="co">#&gt; 5           1982.5 7/1/1982 12:00:00 AM 7/1/1982 12:00:00 AM        1982.499</span>
<span class="co">#&gt; 6           1982.5 7/1/1982 12:00:00 AM 7/1/1982 12:00:00 AM        1982.499</span>
<span class="co">#&gt;   DataCatalogNote DataSourceID DataSourceAuthor DataSourceYear</span>
<span class="co">#&gt; 1              NA           37             UNSD           1984</span>
<span class="co">#&gt; 2              NA           37             UNSD           1984</span>
<span class="co">#&gt; 3              NA           37             UNSD           1984</span>
<span class="co">#&gt; 4              NA           37             UNSD           1984</span>
<span class="co">#&gt; 5              NA           37             UNSD           1984</span>
<span class="co">#&gt; 6              NA           37             UNSD           1984</span>
<span class="co">#&gt;         DataSourceName DataSourceShortName DataStatusName</span>
<span class="co">#&gt; 1 Demographic Yearbook                 DYB          Final</span>
<span class="co">#&gt; 2 Demographic Yearbook                 DYB          Final</span>
<span class="co">#&gt; 3 Demographic Yearbook                 DYB          Final</span>
<span class="co">#&gt; 4 Demographic Yearbook                 DYB          Final</span>
<span class="co">#&gt; 5 Demographic Yearbook                 DYB          Final</span>
<span class="co">#&gt; 6 Demographic Yearbook                 DYB          Final</span>
<span class="co">#&gt;   StatisticalConceptName SexName AgeID AgeUnit AgeStart AgeEnd AgeSpan AgeMid</span>
<span class="co">#&gt; 1               De-facto    Male   700    Year        0     -1      -1   -1.0</span>
<span class="co">#&gt; 2               De-facto    Male   702    Year        5     10       5    7.5</span>
<span class="co">#&gt; 3               De-facto    Male   702    Year        5     10       5    7.5</span>
<span class="co">#&gt; 4               De-facto    Male   703    Year       10     15       5   12.5</span>
<span class="co">#&gt; 5               De-facto    Male   703    Year       10     15       5   12.5</span>
<span class="co">#&gt; 6               De-facto    Male   704    Year       15     20       5   17.5</span>
<span class="co">#&gt;   AgeLabel agesort DataTypeGroupName</span>
<span class="co">#&gt; 1    Total       0            Direct</span>
<span class="co">#&gt; 2      5-9       0            Direct</span>
<span class="co">#&gt; 3      5-9       0            Direct</span>
<span class="co">#&gt; 4    10-14       0            Direct</span>
<span class="co">#&gt; 5    10-14       0            Direct</span>
<span class="co">#&gt; 6    15-19       0            Direct</span>
<span class="co">#&gt;                                                             DataTypeName</span>
<span class="co">#&gt; 1                                              Population by age and sex</span>
<span class="co">#&gt; 2                                              Population by age and sex</span>
<span class="co">#&gt; 3 Direct (standard abridged age groups computed - Unknown redistributed)</span>
<span class="co">#&gt; 4                                              Population by age and sex</span>
<span class="co">#&gt; 5 Direct (standard abridged age groups computed - Unknown redistributed)</span>
<span class="co">#&gt; 6                                              Population by age and sex</span>
<span class="co">#&gt;        ModelType ModelPatternFamilyName        ModelPatternName</span>
<span class="co">#&gt; 1 Not applicable         Not applicable Not applicable (Direct)</span>
<span class="co">#&gt; 2 Not applicable         Not applicable Not applicable (Direct)</span>
<span class="co">#&gt; 3 Not applicable         Not applicable Not applicable (Direct)</span>
<span class="co">#&gt; 4 Not applicable         Not applicable Not applicable (Direct)</span>
<span class="co">#&gt; 5 Not applicable         Not applicable Not applicable (Direct)</span>
<span class="co">#&gt; 6 Not applicable         Not applicable Not applicable (Direct)</span>
<span class="co">#&gt;   DataReliabilityName PeriodTypeName PeriodGroupName PeriodStart PeriodEnd</span>
<span class="co">#&gt; 1                Fair             CR  Not applicable          NA        NA</span>
<span class="co">#&gt; 2                Fair             CR  Not applicable          NA        NA</span>
<span class="co">#&gt; 3                Fair             CR  Not applicable          NA        NA</span>
<span class="co">#&gt; 4                Fair             CR  Not applicable          NA        NA</span>
<span class="co">#&gt; 5                Fair             CR  Not applicable          NA        NA</span>
<span class="co">#&gt; 6                Fair             CR  Not applicable          NA        NA</span>
<span class="co">#&gt;   PeriodSpan PeriodMiddle Weight TimeReferenceID TimeUnit  TimeStart    TimeEnd</span>
<span class="co">#&gt; 1         NA           NA     NA             927     year 01/07/1982 01/07/1982</span>
<span class="co">#&gt; 2         NA           NA     NA             927     year 01/07/1982 01/07/1982</span>
<span class="co">#&gt; 3         NA           NA     NA             927     year 01/07/1982 01/07/1982</span>
<span class="co">#&gt; 4         NA           NA     NA             927     year 01/07/1982 01/07/1982</span>
<span class="co">#&gt; 5         NA           NA     NA             927     year 01/07/1982 01/07/1982</span>
<span class="co">#&gt; 6         NA           NA     NA             927     year 01/07/1982 01/07/1982</span>
<span class="co">#&gt;   TimeDuration TimeMid TimeLabel StaffMemberID FootNoteID id     SeriesID</span>
<span class="co">#&gt; 1            0  1982.5      1982             0          0  1 2.232352e+14</span>
<span class="co">#&gt; 2            0  1982.5      1982             0          0  1 2.232352e+14</span>
<span class="co">#&gt; 3            0  1982.5      1982             0          0  1 8.922218e+11</span>
<span class="co">#&gt; 4            0  1982.5      1982             0          0  1 2.232352e+14</span>
<span class="co">#&gt; 5            0  1982.5      1982             0          0  1 8.922218e+11</span>
<span class="co">#&gt; 6            0  1982.5      1982             0          0  1 2.232352e+14</span>
<span class="co">#&gt;   DataValue</span>
<span class="co">#&gt; 1 515277504</span>
<span class="co">#&gt; 2  57026296</span>
<span class="co">#&gt; 3  57026336</span>
<span class="co">#&gt; 4  67837936</span>
<span class="co">#&gt; 5  67837984</span>
<span class="co">#&gt; 6  63804580</span></pre></body></html></div>
</div>
<div id="births-by-age-of-mother" class="section level4">
<h4 class="hasAnchor">
<a href="#births-by-age-of-mother" class="anchor"></a>Births by age of mother</h4>
<div class="sourceCode" id="cb6"><html><body><pre class="r"><span class="fu"><a href="../reference/get_recorddata.html">get_recorddata</a></span>(<span class="kw">dataProcessIds</span> <span class="kw">=</span> <span class="st">"Census"</span>,
               <span class="kw">indicatorTypeIds</span> <span class="kw">=</span> <span class="st">"Births by age of mother"</span>,
               <span class="kw">locIds</span> <span class="kw">=</span> <span class="st">"Togo"</span>,
               <span class="kw">locAreaTypeIds</span> <span class="kw">=</span> <span class="st">"Whole area"</span>,
               <span class="kw">subGroupIds</span> <span class="kw">=</span> <span class="st">"Total or All groups"</span>,
               <span class="kw">isComplete</span> <span class="kw">=</span> <span class="st">"Abridged"</span>)
<span class="co">#&gt; [1] "http://24.239.36.16:9654/un3/api/locations?"</span>
<span class="co">#&gt; [1] "http://24.239.36.16:9654/un3/api/indicatortypes?"</span>
<span class="co">#&gt; [1] "http://24.239.36.16:9654/un3/api/subgroups?"</span>
<span class="co">#&gt; [1] "http://24.239.36.16:9654/un3/api/locareatypes?indicatorTypeIds=16&amp;isComplete=0&amp;locIds=768"</span>
<span class="co">#&gt; [1] "http://24.239.36.16:9654/un3/api/dataprocesstypes?indicatorTypeIds=16&amp;isComplete=0&amp;locIds=768"</span>
<span class="co">#&gt; Error in fun(vec, ...): Data type(s) 'Census' not found. Check get_dataprocess()</span></pre></body></html></div>
<p>See the error? This means that using <code>"Census"</code> for this set of options is unavailable. We need to check which other data processes have data for these options (for example, using <code><a href="../reference/get_dataprocess.html">get_dataprocess()</a></code>). Since this is a trial and error process, we’ve nailed it down to <code>"Survey: cross-sectional survey (generic/national)"</code>:</p>
<div class="sourceCode" id="cb7"><html><body><pre class="r"><span class="no">togo</span> <span class="kw">&lt;-</span> <span class="fu"><a href="../reference/get_recorddata.html">get_recorddata</a></span>(<span class="kw">dataProcessIds</span> <span class="kw">=</span> <span class="st">"Survey: cross-sectional survey (generic/national)"</span>,
                       <span class="kw">indicatorTypeIds</span> <span class="kw">=</span> <span class="st">"Births by age of mother"</span>,
                       <span class="kw">locIds</span> <span class="kw">=</span> <span class="st">"Togo"</span>,
                       <span class="kw">locAreaTypeIds</span> <span class="kw">=</span> <span class="st">"Whole area"</span>,
                       <span class="kw">subGroupIds</span> <span class="kw">=</span> <span class="st">"Total or All groups"</span>,
                       <span class="kw">isComplete</span> <span class="kw">=</span> <span class="st">"Abridged"</span>)
<span class="co">#&gt; [1] "http://24.239.36.16:9654/un3/api/locations?"</span>
<span class="co">#&gt; [1] "http://24.239.36.16:9654/un3/api/indicatortypes?"</span>
<span class="co">#&gt; [1] "http://24.239.36.16:9654/un3/api/subgroups?"</span>
<span class="co">#&gt; [1] "http://24.239.36.16:9654/un3/api/locareatypes?indicatorTypeIds=16&amp;isComplete=0&amp;locIds=768"</span>
<span class="co">#&gt; [1] "http://24.239.36.16:9654/un3/api/dataprocesstypes?indicatorTypeIds=16&amp;isComplete=0&amp;locIds=768"</span>
<span class="co">#&gt; If you run the same query again, use the one below (faster): </span>
<span class="co">#&gt;   get_recorddata(dataProcessIds = 11, indicatorTypeIds = 16, isComplete = 0, locIds = 768, locAreaTypeIds = 2, subGroupIds = 2)[1] "http://24.239.36.16:9654/un3/api/structureddatarecords?dataProcessIds=11&amp;indicatorTypeIds=16&amp;isComplete=0&amp;locIds=768&amp;locAreaTypeIds=2&amp;subGroupIds=2"</span>

<span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span>(<span class="no">togo</span>)
<span class="co">#&gt;                                IndicatorName LocName PK_StructuredDataID</span>
<span class="co">#&gt; 1 Births by age of mother (and sex of child)    Togo           122092170</span>
<span class="co">#&gt; 2 Births by age of mother (and sex of child)    Togo            80596190</span>
<span class="co">#&gt; 3 Births by age of mother (and sex of child)    Togo           122092171</span>
<span class="co">#&gt; 4 Births by age of mother (and sex of child)    Togo            80596183</span>
<span class="co">#&gt; 5 Births by age of mother (and sex of child)    Togo           122092172</span>
<span class="co">#&gt; 6 Births by age of mother (and sex of child)    Togo            80596187</span>
<span class="co">#&gt;   LocTypeName        RegName AreaName LocAreaTypeName</span>
<span class="co">#&gt; 1     Country Western Africa   Africa      Whole area</span>
<span class="co">#&gt; 2     Country Western Africa   Africa      Whole area</span>
<span class="co">#&gt; 3     Country Western Africa   Africa      Whole area</span>
<span class="co">#&gt; 4     Country Western Africa   Africa      Whole area</span>
<span class="co">#&gt; 5     Country Western Africa   Africa      Whole area</span>
<span class="co">#&gt; 6     Country Western Africa   Africa      Whole area</span>
<span class="co">#&gt;                   SubGroupTypeName SubGroupID1 SubGroupCombinationID</span>
<span class="co">#&gt; 1 Total / All groups / Whole group           2                     0</span>
<span class="co">#&gt; 2 Total / All groups / Whole group           2                     0</span>
<span class="co">#&gt; 3 Total / All groups / Whole group           2                     0</span>
<span class="co">#&gt; 4 Total / All groups / Whole group           2                     0</span>
<span class="co">#&gt; 5 Total / All groups / Whole group           2                     0</span>
<span class="co">#&gt; 6 Total / All groups / Whole group           2                     0</span>
<span class="co">#&gt;   SubGroupTypeSortOrder IndicatorShortName DataCatalogID DataProcessTypeID</span>
<span class="co">#&gt; 1                     3             Births           690                11</span>
<span class="co">#&gt; 2                     3             Births           690                11</span>
<span class="co">#&gt; 3                     3             Births           690                11</span>
<span class="co">#&gt; 4                     3             Births           690                11</span>
<span class="co">#&gt; 5                     3             Births           690                11</span>
<span class="co">#&gt; 6                     3             Births           690                11</span>
<span class="co">#&gt;   DataProcessType DataProcess                 DataCatalogName</span>
<span class="co">#&gt; 1          Survey      Survey Togo 1961 Enquête démographique</span>
<span class="co">#&gt; 2          Survey      Survey Togo 1961 Enquête démographique</span>
<span class="co">#&gt; 3          Survey      Survey Togo 1961 Enquête démographique</span>
<span class="co">#&gt; 4          Survey      Survey Togo 1961 Enquête démographique</span>
<span class="co">#&gt; 5          Survey      Survey Togo 1961 Enquête démographique</span>
<span class="co">#&gt; 6          Survey      Survey Togo 1961 Enquête démographique</span>
<span class="co">#&gt;   DataCatalogShortName ReferencePeriod ReferenceYearStart ReferenceYearEnd</span>
<span class="co">#&gt; 1              1961 ED            1961               1961             1961</span>
<span class="co">#&gt; 2              1961 ED            1961               1961             1961</span>
<span class="co">#&gt; 3              1961 ED            1961               1961             1961</span>
<span class="co">#&gt; 4              1961 ED            1961               1961             1961</span>
<span class="co">#&gt; 5              1961 ED            1961               1961             1961</span>
<span class="co">#&gt; 6              1961 ED            1961               1961             1961</span>
<span class="co">#&gt;   ReferenceYearMid         FieldWorkStart           FieldWorkEnd</span>
<span class="co">#&gt; 1           1961.5 12/11/1961 12:00:00 AM 12/11/1961 12:00:00 AM</span>
<span class="co">#&gt; 2           1961.5 12/11/1961 12:00:00 AM 12/11/1961 12:00:00 AM</span>
<span class="co">#&gt; 3           1961.5 12/11/1961 12:00:00 AM 12/11/1961 12:00:00 AM</span>
<span class="co">#&gt; 4           1961.5 12/11/1961 12:00:00 AM 12/11/1961 12:00:00 AM</span>
<span class="co">#&gt; 5           1961.5 12/11/1961 12:00:00 AM 12/11/1961 12:00:00 AM</span>
<span class="co">#&gt; 6           1961.5 12/11/1961 12:00:00 AM 12/11/1961 12:00:00 AM</span>
<span class="co">#&gt;   FieldWorkMiddle DataCatalogNote DataSourceID DataSourceAuthor DataSourceYear</span>
<span class="co">#&gt; 1        1961.945              NA           19             UNSD           1966</span>
<span class="co">#&gt; 2        1961.945              NA           19             UNSD           1966</span>
<span class="co">#&gt; 3        1961.945              NA           19             UNSD           1966</span>
<span class="co">#&gt; 4        1961.945              NA           19             UNSD           1966</span>
<span class="co">#&gt; 5        1961.945              NA           19             UNSD           1966</span>
<span class="co">#&gt; 6        1961.945              NA           19             UNSD           1966</span>
<span class="co">#&gt;         DataSourceName DataSourceShortName DataStatusName</span>
<span class="co">#&gt; 1 Demographic Yearbook                 DYB          Final</span>
<span class="co">#&gt; 2 Demographic Yearbook                 DYB          Final</span>
<span class="co">#&gt; 3 Demographic Yearbook                 DYB          Final</span>
<span class="co">#&gt; 4 Demographic Yearbook                 DYB          Final</span>
<span class="co">#&gt; 5 Demographic Yearbook                 DYB          Final</span>
<span class="co">#&gt; 6 Demographic Yearbook                 DYB          Final</span>
<span class="co">#&gt;   StatisticalConceptName    SexName AgeID AgeUnit AgeStart AgeEnd AgeSpan</span>
<span class="co">#&gt; 1     Year of occurrence Both sexes   303    Year       10     15       5</span>
<span class="co">#&gt; 2     Year of occurrence Both sexes   304    Year       15     20       5</span>
<span class="co">#&gt; 3     Year of occurrence Both sexes   304    Year       15     20       5</span>
<span class="co">#&gt; 4     Year of occurrence Both sexes   305    Year       20     25       5</span>
<span class="co">#&gt; 5     Year of occurrence Both sexes   305    Year       20     25       5</span>
<span class="co">#&gt; 6     Year of occurrence Both sexes   306    Year       25     30       5</span>
<span class="co">#&gt;   AgeMid AgeLabel agesort DataTypeGroupName</span>
<span class="co">#&gt; 1   12.5    10-14       0            Direct</span>
<span class="co">#&gt; 2   17.5    15-19       0            Direct</span>
<span class="co">#&gt; 3   17.5    15-19       0            Direct</span>
<span class="co">#&gt; 4   22.5    20-24       0            Direct</span>
<span class="co">#&gt; 5   22.5    20-24       0            Direct</span>
<span class="co">#&gt; 6   27.5    25-29       0            Direct</span>
<span class="co">#&gt;                                                             DataTypeName</span>
<span class="co">#&gt; 1 Direct (standard abridged age groups computed - Unknown redistributed)</span>
<span class="co">#&gt; 2                                                                 Direct</span>
<span class="co">#&gt; 3 Direct (standard abridged age groups computed - Unknown redistributed)</span>
<span class="co">#&gt; 4                                                                 Direct</span>
<span class="co">#&gt; 5 Direct (standard abridged age groups computed - Unknown redistributed)</span>
<span class="co">#&gt; 6                                                                 Direct</span>
<span class="co">#&gt;        ModelType ModelPatternFamilyName        ModelPatternName</span>
<span class="co">#&gt; 1 Not applicable         Not applicable Not applicable (Direct)</span>
<span class="co">#&gt; 2 Not applicable         Not applicable Not applicable (Direct)</span>
<span class="co">#&gt; 3 Not applicable         Not applicable Not applicable (Direct)</span>
<span class="co">#&gt; 4 Not applicable         Not applicable Not applicable (Direct)</span>
<span class="co">#&gt; 5 Not applicable         Not applicable Not applicable (Direct)</span>
<span class="co">#&gt; 6 Not applicable         Not applicable Not applicable (Direct)</span>
<span class="co">#&gt;   DataReliabilityName PeriodTypeName PeriodGroupName PeriodStart PeriodEnd</span>
<span class="co">#&gt; 1                Fair             CR  Not applicable          NA        NA</span>
<span class="co">#&gt; 2                Fair             CR  Not applicable          NA        NA</span>
<span class="co">#&gt; 3                Fair             CR  Not applicable          NA        NA</span>
<span class="co">#&gt; 4                Fair             CR  Not applicable          NA        NA</span>
<span class="co">#&gt; 5                Fair             CR  Not applicable          NA        NA</span>
<span class="co">#&gt; 6                Fair             CR  Not applicable          NA        NA</span>
<span class="co">#&gt;   PeriodSpan PeriodMiddle Weight TimeReferenceID TimeUnit  TimeStart    TimeEnd</span>
<span class="co">#&gt; 1         NA           NA     NA         5019753     year 01/01/1961 31/12/1961</span>
<span class="co">#&gt; 2         NA           NA     NA         5019753     year 01/01/1961 31/12/1961</span>
<span class="co">#&gt; 3         NA           NA     NA         5019753     year 01/01/1961 31/12/1961</span>
<span class="co">#&gt; 4         NA           NA     NA         5019753     year 01/01/1961 31/12/1961</span>
<span class="co">#&gt; 5         NA           NA     NA         5019753     year 01/01/1961 31/12/1961</span>
<span class="co">#&gt; 6         NA           NA     NA         5019753     year 01/01/1961 31/12/1961</span>
<span class="co">#&gt;   TimeDuration TimeMid TimeLabel StaffMemberID FootNoteID id    SeriesID</span>
<span class="co">#&gt; 1            1  1961.5        NA             0          0  1  3115296084</span>
<span class="co">#&gt; 2            1  1961.5        NA             0          0  1 69981216851</span>
<span class="co">#&gt; 3            1  1961.5        NA             0          0  1  3115296084</span>
<span class="co">#&gt; 4            1  1961.5        NA             0          0  1 69981216851</span>
<span class="co">#&gt; 5            1  1961.5        NA             0          0  1  3115296084</span>
<span class="co">#&gt; 6            1  1961.5        NA             0          0  1 69981216851</span>
<span class="co">#&gt;   DataValue</span>
<span class="co">#&gt; 1         0</span>
<span class="co">#&gt; 2      7150</span>
<span class="co">#&gt; 3      7150</span>
<span class="co">#&gt; 4     21910</span>
<span class="co">#&gt; 5     21910</span>
<span class="co">#&gt; 6     25305</span></pre></body></html></div>
</div>
<div id="deaths-by-age-and-sex-using-register-data" class="section level4">
<h4 class="hasAnchor">
<a href="#deaths-by-age-and-sex-using-register-data" class="anchor"></a>Deaths by age and sex using register data</h4>
<div class="sourceCode" id="cb8"><html><body><pre class="r"><span class="no">oman</span> <span class="kw">&lt;-</span> <span class="fu"><a href="../reference/get_recorddata.html">get_recorddata</a></span>(<span class="kw">dataProcessIds</span> <span class="kw">=</span> <span class="st">"Register"</span>,
                       <span class="kw">indicatorTypeIds</span> <span class="kw">=</span> <span class="st">"Deaths by age and sex"</span>,
                       <span class="kw">locIds</span> <span class="kw">=</span> <span class="st">"Oman"</span>,
                       <span class="kw">locAreaTypeIds</span> <span class="kw">=</span> <span class="st">"Whole area"</span>,
                       <span class="kw">subGroupIds</span> <span class="kw">=</span> <span class="st">"Total or All groups"</span>,
                       <span class="kw">isComplete</span> <span class="kw">=</span> <span class="st">"Abridged"</span>)
<span class="co">#&gt; [1] "http://24.239.36.16:9654/un3/api/locations?"</span>
<span class="co">#&gt; [1] "http://24.239.36.16:9654/un3/api/indicatortypes?"</span>
<span class="co">#&gt; [1] "http://24.239.36.16:9654/un3/api/subgroups?"</span>
<span class="co">#&gt; [1] "http://24.239.36.16:9654/un3/api/locareatypes?indicatorTypeIds=20&amp;isComplete=0&amp;locIds=512"</span>
<span class="co">#&gt; [1] "http://24.239.36.16:9654/un3/api/dataprocesstypes?indicatorTypeIds=20&amp;isComplete=0&amp;locIds=512"</span>
<span class="co">#&gt; If you run the same query again, use the one below (faster): </span>
<span class="co">#&gt;   get_recorddata(dataProcessIds = 9, indicatorTypeIds = 20, isComplete = 0, locIds = 512, locAreaTypeIds = 2, subGroupIds = 2)[1] "http://24.239.36.16:9654/un3/api/structureddatarecords?dataProcessIds=9&amp;indicatorTypeIds=20&amp;isComplete=0&amp;locIds=512&amp;locAreaTypeIds=2&amp;subGroupIds=2"</span>

<span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span>(<span class="no">oman</span>)
<span class="co">#&gt;                      IndicatorName LocName PK_StructuredDataID LocTypeName</span>
<span class="co">#&gt; 1 Deaths by age and sex - abridged    Oman           113147882     Country</span>
<span class="co">#&gt; 2 Deaths by age and sex - abridged    Oman           113148230     Country</span>
<span class="co">#&gt; 3 Deaths by age and sex - abridged    Oman           113149420     Country</span>
<span class="co">#&gt; 4 Deaths by age and sex - abridged    Oman           113149508     Country</span>
<span class="co">#&gt; 5 Deaths by age and sex - abridged    Oman           113149237     Country</span>
<span class="co">#&gt; 6 Deaths by age and sex - abridged    Oman           113148409     Country</span>
<span class="co">#&gt;        RegName AreaName LocAreaTypeName                 SubGroupTypeName</span>
<span class="co">#&gt; 1 Western Asia     Asia      Whole area Total / All groups / Whole group</span>
<span class="co">#&gt; 2 Western Asia     Asia      Whole area Total / All groups / Whole group</span>
<span class="co">#&gt; 3 Western Asia     Asia      Whole area Total / All groups / Whole group</span>
<span class="co">#&gt; 4 Western Asia     Asia      Whole area Total / All groups / Whole group</span>
<span class="co">#&gt; 5 Western Asia     Asia      Whole area Total / All groups / Whole group</span>
<span class="co">#&gt; 6 Western Asia     Asia      Whole area Total / All groups / Whole group</span>
<span class="co">#&gt;   SubGroupID1 SubGroupCombinationID SubGroupTypeSortOrder IndicatorShortName</span>
<span class="co">#&gt; 1           2                     0                     3            Deaths5</span>
<span class="co">#&gt; 2           2                     0                     3            Deaths5</span>
<span class="co">#&gt; 3           2                     0                     3            Deaths5</span>
<span class="co">#&gt; 4           2                     0                     3            Deaths5</span>
<span class="co">#&gt; 5           2                     0                     3            Deaths5</span>
<span class="co">#&gt; 6           2                     0                     3            Deaths5</span>
<span class="co">#&gt;   DataCatalogID DataProcessTypeID DataProcessType DataProcess</span>
<span class="co">#&gt; 1          4896                 9        Register          VR</span>
<span class="co">#&gt; 2          4896                 9        Register          VR</span>
<span class="co">#&gt; 3          4896                 9        Register          VR</span>
<span class="co">#&gt; 4          4896                 9        Register          VR</span>
<span class="co">#&gt; 5          4896                 9        Register          VR</span>
<span class="co">#&gt; 6          4896                 9        Register          VR</span>
<span class="co">#&gt;      DataCatalogName DataCatalogShortName ReferencePeriod ReferenceYearStart</span>
<span class="co">#&gt; 1 Vital Registration             Register           1980-               1980</span>
<span class="co">#&gt; 2 Vital Registration             Register           1980-               1980</span>
<span class="co">#&gt; 3 Vital Registration             Register           1980-               1980</span>
<span class="co">#&gt; 4 Vital Registration             Register           1980-               1980</span>
<span class="co">#&gt; 5 Vital Registration             Register           1980-               1980</span>
<span class="co">#&gt; 6 Vital Registration             Register           1980-               1980</span>
<span class="co">#&gt;   ReferenceYearEnd ReferenceYearMid FieldWorkStart FieldWorkEnd FieldWorkMiddle</span>
<span class="co">#&gt; 1               NA               NA             NA           NA              NA</span>
<span class="co">#&gt; 2               NA               NA             NA           NA              NA</span>
<span class="co">#&gt; 3               NA               NA             NA           NA              NA</span>
<span class="co">#&gt; 4               NA               NA             NA           NA              NA</span>
<span class="co">#&gt; 5               NA               NA             NA           NA              NA</span>
<span class="co">#&gt; 6               NA               NA             NA           NA              NA</span>
<span class="co">#&gt;   DataCatalogNote DataSourceID DataSourceAuthor DataSourceYear</span>
<span class="co">#&gt; 1              NA           56             UNSD           2003</span>
<span class="co">#&gt; 2              NA           56             UNSD           2003</span>
<span class="co">#&gt; 3              NA           56             UNSD           2003</span>
<span class="co">#&gt; 4              NA           56             UNSD           2003</span>
<span class="co">#&gt; 5              NA           56             UNSD           2003</span>
<span class="co">#&gt; 6              NA           56             UNSD           2003</span>
<span class="co">#&gt;         DataSourceName DataSourceShortName DataStatusName</span>
<span class="co">#&gt; 1 Demographic Yearbook                 DYB          Final</span>
<span class="co">#&gt; 2 Demographic Yearbook                 DYB          Final</span>
<span class="co">#&gt; 3 Demographic Yearbook                 DYB          Final</span>
<span class="co">#&gt; 4 Demographic Yearbook                 DYB          Final</span>
<span class="co">#&gt; 5 Demographic Yearbook                 DYB          Final</span>
<span class="co">#&gt; 6 Demographic Yearbook                 DYB          Final</span>
<span class="co">#&gt;   StatisticalConceptName    SexName AgeID AgeUnit AgeStart AgeEnd AgeSpan</span>
<span class="co">#&gt; 1     Year of occurrence Both sexes   331    Year        1      5       4</span>
<span class="co">#&gt; 2     Year of occurrence Both sexes   398    Year        0     -1      -1</span>
<span class="co">#&gt; 3     Year of occurrence Both sexes  3154    Year        5     15      10</span>
<span class="co">#&gt; 4     Year of occurrence Both sexes  3242    Year       15     45      30</span>
<span class="co">#&gt; 5     Year of occurrence Both sexes  3263    Year       45      0      -1</span>
<span class="co">#&gt; 6     Year of occurrence Both sexes   331    Year        1      5       4</span>
<span class="co">#&gt;   AgeMid AgeLabel agesort DataTypeGroupName DataTypeName      ModelType</span>
<span class="co">#&gt; 1    3.0      1-4       0            Direct       Direct Not applicable</span>
<span class="co">#&gt; 2   -1.0    Total       0            Direct       Direct Not applicable</span>
<span class="co">#&gt; 3   10.0     5-14       0            Direct       Direct Not applicable</span>
<span class="co">#&gt; 4   30.0    15-44       0            Direct       Direct Not applicable</span>
<span class="co">#&gt; 5   72.5      45+       0            Direct       Direct Not applicable</span>
<span class="co">#&gt; 6    3.0      1-4       0            Direct       Direct Not applicable</span>
<span class="co">#&gt;   ModelPatternFamilyName        ModelPatternName DataReliabilityName</span>
<span class="co">#&gt; 1         Not applicable Not applicable (Direct)                 Low</span>
<span class="co">#&gt; 2         Not applicable Not applicable (Direct)                 Low</span>
<span class="co">#&gt; 3         Not applicable Not applicable (Direct)                 Low</span>
<span class="co">#&gt; 4         Not applicable Not applicable (Direct)                 Low</span>
<span class="co">#&gt; 5         Not applicable Not applicable (Direct)                 Low</span>
<span class="co">#&gt; 6         Not applicable Not applicable (Direct)                 Low</span>
<span class="co">#&gt;   PeriodTypeName PeriodGroupName PeriodStart PeriodEnd PeriodSpan PeriodMiddle</span>
<span class="co">#&gt; 1             CR  Not applicable          NA        NA         NA           NA</span>
<span class="co">#&gt; 2             CR  Not applicable          NA        NA         NA           NA</span>
<span class="co">#&gt; 3             CR  Not applicable          NA        NA         NA           NA</span>
<span class="co">#&gt; 4             CR  Not applicable          NA        NA         NA           NA</span>
<span class="co">#&gt; 5             CR  Not applicable          NA        NA         NA           NA</span>
<span class="co">#&gt; 6             CR  Not applicable          NA        NA         NA           NA</span>
<span class="co">#&gt;   Weight TimeReferenceID TimeUnit  TimeStart    TimeEnd TimeDuration TimeMid</span>
<span class="co">#&gt; 1     NA             944     year 01/07/1999 01/07/1999            0  1999.5</span>
<span class="co">#&gt; 2     NA             944     year 01/07/1999 01/07/1999            0  1999.5</span>
<span class="co">#&gt; 3     NA             944     year 01/07/1999 01/07/1999            0  1999.5</span>
<span class="co">#&gt; 4     NA             944     year 01/07/1999 01/07/1999            0  1999.5</span>
<span class="co">#&gt; 5     NA             944     year 01/07/1999 01/07/1999            0  1999.5</span>
<span class="co">#&gt; 6     NA             945     year 01/07/2000 01/07/2000            0  2000.5</span>
<span class="co">#&gt;   TimeLabel StaffMemberID FootNoteID id     SeriesID DataValue</span>
<span class="co">#&gt; 1      1999             0          0  1 2.052191e+14        56</span>
<span class="co">#&gt; 2      1999             0          0  1 2.052191e+14      2440</span>
<span class="co">#&gt; 3      1999             0          0  1 2.052191e+14        67</span>
<span class="co">#&gt; 4      1999             0          0  1 2.052191e+14       286</span>
<span class="co">#&gt; 5      1999             0          0  1 2.052191e+14      1645</span>
<span class="co">#&gt; 6      2000             0          0  1 1.572421e+13        59</span></pre></body></html></div>
</div>
<div id="change-the-ip-of-the-unpd-sql-api" class="section level4">
<h4 class="hasAnchor">
<a href="#change-the-ip-of-the-unpd-sql-api" class="anchor"></a>Change the IP of the UNPD SQL API</h4>
<p>Currently the IP of the server is automatically set but can be changed simply by adding <code><a href="https://rdrr.io/r/base/options.html">options(unpd_server = "your server")</a></code> to the beginning of your script:</p>
<div class="sourceCode" id="cb9"><html><body><pre class="r"><span class="co"># Change this to the desired server. This is the server</span>
<span class="co"># which is set by default.</span>
<span class="fu"><a href="https://rdrr.io/r/base/options.html">options</a></span>(<span class="kw">unpd_server</span> <span class="kw">=</span> <span class="st">"http://24.239.36.16:9654/un3/api/"</span>)

<span class="fu"><a href="../reference/get_recorddata.html">get_recorddata</a></span>(<span class="kw">dataProcessIds</span> <span class="kw">=</span> <span class="st">"Register"</span>,
               <span class="kw">indicatorTypeIds</span> <span class="kw">=</span> <span class="st">"Deaths by age and sex"</span>,
               <span class="kw">locIds</span> <span class="kw">=</span> <span class="st">"Oman"</span>,
               <span class="kw">locAreaTypeIds</span> <span class="kw">=</span> <span class="st">"Whole area"</span>,
               <span class="kw">subGroupIds</span> <span class="kw">=</span> <span class="st">"Total or All groups"</span>,
               <span class="kw">isComplete</span> <span class="kw">=</span> <span class="st">"Abridged"</span>)</pre></body></html></div>
</div>
<div id="downloading-many-countries" class="section level4">
<h4 class="hasAnchor">
<a href="#downloading-many-countries" class="anchor"></a>Downloading many countries</h4>
<p>Due to the nature of the UNPD API, it’s not possible to download over 30 countries in the same API request. For example, if we wanted to download data on these countries:</p>
<div class="sourceCode" id="cb10"><html><body><pre class="r">
<span class="no">myLocations</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="fl">28</span>, <span class="fl">492</span>, <span class="fl">570</span>, <span class="fl">674</span>, <span class="fl">308</span>, <span class="fl">96</span>, <span class="fl">196</span>, <span class="fl">8</span>,
                 <span class="fl">376</span>, <span class="fl">662</span>, <span class="fl">670</span>, <span class="fl">642</span>, <span class="fl">84</span>, <span class="fl">188</span>, <span class="fl">442</span>, <span class="fl">100</span>,
                 <span class="fl">192</span>, <span class="fl">170</span>, <span class="fl">414</span>, <span class="fl">616</span>, <span class="fl">320</span>, <span class="fl">480</span>, <span class="fl">218</span>,
                 <span class="fl">818</span>, <span class="fl">222</span>, <span class="fl">300</span>, <span class="fl">558</span>, <span class="fl">40</span>, <span class="fl">52</span>, <span class="fl">348</span>, <span class="fl">470</span>,
                 <span class="fl">620</span>, <span class="fl">702</span>, <span class="fl">858</span>, <span class="fl">56</span>, <span class="fl">780</span>, <span class="fl">388</span>, <span class="fl">246</span>, <span class="fl">352</span>,
                 <span class="fl">591</span>, <span class="fl">144</span>, <span class="fl">862</span>)

<span class="fu"><a href="../reference/get_recorddata.html">get_recorddata</a></span>(<span class="kw">dataProcessIds</span> <span class="kw">=</span> <span class="st">"Register"</span>,
               <span class="kw">indicatorTypeIds</span> <span class="kw">=</span> <span class="st">"Deaths by age and sex"</span>,
               <span class="kw">locIds</span> <span class="kw">=</span> <span class="no">myLocations</span>,
               <span class="kw">locAreaTypeIds</span> <span class="kw">=</span> <span class="st">"Whole area"</span>,
               <span class="kw">subGroupIds</span> <span class="kw">=</span> <span class="st">"Total or All groups"</span>,
               <span class="kw">isComplete</span> <span class="kw">=</span> <span class="st">"Abridged"</span>,
               <span class="kw">startYear</span> <span class="kw">=</span> <span class="fl">1920</span>,
               <span class="kw">endYear</span> <span class="kw">=</span> <span class="fl">2020</span>)</pre></body></html></div>
<p>You’ll get an error saying that <code>DDSQLtools</code> could not connect to the API. When that happens you can loop over chunks of countries to get it faster. The first thinkg you want to do is to copy the <strong>optimized query</strong> printed by <code>get_recorddata</code> that already translated the string codes to numbers.</p>
<p>After that, you need to loop through groups of countries and make requests for each group separately. Below is the same example using base R and the <code>tidyverse</code>. On average, downloading these countries takes between 25 to 30 minutes.</p>
<div id="using-base-r" class="section level5">
<h5 class="hasAnchor">
<a href="#using-base-r" class="anchor"></a>Using base R</h5>
<div class="sourceCode" id="cb11"><html><body><pre class="r"><span class="no">myLocations</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="fl">28</span>, <span class="fl">492</span>, <span class="fl">570</span>, <span class="fl">674</span>, <span class="fl">308</span>, <span class="fl">96</span>, <span class="fl">196</span>, <span class="fl">8</span>,
                 <span class="fl">376</span>, <span class="fl">662</span>, <span class="fl">670</span>, <span class="fl">642</span>, <span class="fl">84</span>, <span class="fl">188</span>, <span class="fl">442</span>, <span class="fl">100</span>,
                 <span class="fl">192</span>, <span class="fl">170</span>, <span class="fl">414</span>, <span class="fl">616</span>, <span class="fl">320</span>, <span class="fl">480</span>, <span class="fl">218</span>,
                 <span class="fl">818</span>, <span class="fl">222</span>, <span class="fl">300</span>, <span class="fl">558</span>, <span class="fl">40</span>, <span class="fl">52</span>, <span class="fl">348</span>, <span class="fl">470</span>,
                 <span class="fl">620</span>, <span class="fl">702</span>, <span class="fl">858</span>, <span class="fl">56</span>, <span class="fl">780</span>, <span class="fl">388</span>, <span class="fl">246</span>, <span class="fl">352</span>,
                 <span class="fl">591</span>, <span class="fl">144</span>, <span class="fl">862</span>)

<span class="co"># Here replace with number of desired chunk of countries</span>
<span class="no">n_chunks</span> <span class="kw">&lt;-</span> <span class="fl">3</span>
<span class="no">chunk_groups</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html">rep</a></span>(<span class="fl">1</span>:<span class="no">n_chunks</span>, <span class="kw">length.out</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/length.html">length</a></span>(<span class="no">myLocations</span>))
<span class="no">cnty_groups</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/split.html">split</a></span>(<span class="no">myLocations</span>, <span class="no">chunk_groups</span>)

<span class="co"># Loop through each chunk of countries with `lapply`</span>
<span class="no">deaths</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/lapply.html">lapply</a></span>(<span class="no">cnty_groups</span>, <span class="kw">function</span>(<span class="no">x</span>) {

  <span class="no">res</span> <span class="kw">&lt;-</span> <span class="fu"><a href="../reference/get_recorddata.html">get_recorddata</a></span>(<span class="kw">dataProcessIds</span> <span class="kw">=</span> <span class="fl">9</span>,
                        <span class="kw">startYear</span> <span class="kw">=</span> <span class="fl">1920</span>,
                        <span class="kw">endYear</span> <span class="kw">=</span> <span class="fl">2020</span>,
                        <span class="kw">indicatorTypeIds</span> <span class="kw">=</span> <span class="fl">20</span>,
                        <span class="kw">isComplete</span> <span class="kw">=</span> <span class="fl">0</span>,
                        <span class="kw">locIds</span> <span class="kw">=</span> <span class="no">x</span>,
                        <span class="kw">locAreaTypeIds</span> <span class="kw">=</span> <span class="fl">2</span>,
                        <span class="kw">subGroupIds</span> <span class="kw">=</span> <span class="fl">2</span>)

  <span class="co"># Informative message to keep track of which chunk</span>
  <span class="co"># of countries have been completed.</span>
  <span class="fu"><a href="https://rdrr.io/r/base/cat.html">cat</a></span>(<span class="st">"Countries"</span>, <span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste0</a></span>(<span class="no">x</span>, <span class="kw">collapse</span> <span class="kw">=</span> <span class="st">", "</span>), <span class="st">"done"</span>)
  <span class="no">res</span>
})

<span class="co"># Row-bind all the data frames into one data frame</span>
<span class="no">deaths</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/do.call.html">do.call</a></span>(<span class="no">rbind</span>, <span class="no">deaths</span>)
<span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span>(<span class="no">deaths</span>)</pre></body></html></div>
</div>
<div id="using-the-tidyverse" class="section level5">
<h5 class="hasAnchor">
<a href="#using-the-tidyverse" class="anchor"></a>Using the tidyverse</h5>
<div class="sourceCode" id="cb12"><html><body><pre class="r"><span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="no">tidyverse</span>)

<span class="no">myLocations</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="fl">28</span>, <span class="fl">492</span>, <span class="fl">570</span>, <span class="fl">674</span>, <span class="fl">308</span>, <span class="fl">96</span>, <span class="fl">196</span>, <span class="fl">8</span>,
                 <span class="fl">376</span>, <span class="fl">662</span>, <span class="fl">670</span>, <span class="fl">642</span>, <span class="fl">84</span>, <span class="fl">188</span>, <span class="fl">442</span>, <span class="fl">100</span>,
                 <span class="fl">192</span>, <span class="fl">170</span>, <span class="fl">414</span>, <span class="fl">616</span>, <span class="fl">320</span>, <span class="fl">480</span>, <span class="fl">218</span>,
                 <span class="fl">818</span>, <span class="fl">222</span>, <span class="fl">300</span>, <span class="fl">558</span>, <span class="fl">40</span>, <span class="fl">52</span>, <span class="fl">348</span>, <span class="fl">470</span>,
                 <span class="fl">620</span>, <span class="fl">702</span>, <span class="fl">858</span>, <span class="fl">56</span>, <span class="fl">780</span>, <span class="fl">388</span>, <span class="fl">246</span>, <span class="fl">352</span>,
                 <span class="fl">591</span>, <span class="fl">144</span>, <span class="fl">862</span>)

<span class="no">n_chunks</span> <span class="kw">&lt;-</span> <span class="fl">3</span>
<span class="no">chunk_groups</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html">rep</a></span>(<span class="fl">1</span>:<span class="no">n_chunks</span>, <span class="kw">length.out</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/length.html">length</a></span>(<span class="no">myLocations</span>))

<span class="no">cnty_groups</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/split.html">split</a></span>(<span class="no">myLocations</span>, <span class="no">chunk_groups</span>)

<span class="co"># Loop through each location with `purrr`</span>
<span class="no">deaths</span> <span class="kw">&lt;-</span> <span class="fu">map</span>(<span class="no">cnty_groups</span>, ~ {

  <span class="no">res</span> <span class="kw">&lt;-</span> <span class="fu"><a href="../reference/get_recorddata.html">get_recorddata</a></span>(<span class="kw">dataProcessIds</span> <span class="kw">=</span> <span class="fl">9</span>,
                        <span class="kw">startYear</span> <span class="kw">=</span> <span class="fl">1920</span>,
                        <span class="kw">endYear</span> <span class="kw">=</span> <span class="fl">2020</span>,
                        <span class="kw">indicatorTypeIds</span> <span class="kw">=</span> <span class="fl">20</span>,
                        <span class="kw">isComplete</span> <span class="kw">=</span> <span class="fl">0</span>,
                        <span class="kw">locIds</span> <span class="kw">=</span> <span class="no">.x</span>,
                        <span class="kw">locAreaTypeIds</span> <span class="kw">=</span> <span class="fl">2</span>,
                        <span class="kw">subGroupIds</span> <span class="kw">=</span> <span class="fl">2</span>)

  <span class="fu"><a href="https://rdrr.io/r/base/cat.html">cat</a></span>(<span class="st">"Countries"</span>, <span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste0</a></span>(<span class="no">x</span>, <span class="kw">collapse</span> <span class="kw">=</span> <span class="st">", "</span>), <span class="st">" done"</span>)
  <span class="no">res</span>
})

<span class="no">deaths</span> <span class="kw">&lt;-</span>
  <span class="no">deaths</span> <span class="kw">%&gt;%</span>
  <span class="fu">bind_rows</span>() <span class="kw">%&gt;%</span>
  <span class="fu">as_tibble</span>()

<span class="no">deaths</span></pre></body></html></div>
</div>
</div>
<div id="identifying-id-and-names-of-values" class="section level4">
<h4 class="hasAnchor">
<a href="#identifying-id-and-names-of-values" class="anchor"></a>Identifying ID and Names of values</h4>
<p>Whenever you download some data, you’ll see that there are several columns that end with <code>Name</code>. This columns contain, for example, the name of the location (<code>LocName</code>) or the name of the subgroup (<code>SubGroupNam</code>). To be able to see the equivalent ID of these names, there are two different strategies using the <code>haven</code> package.</p>
<p>First, let’s get some data:</p>
<div class="sourceCode" id="cb13"><html><body><pre class="r"><span class="no">res</span> <span class="kw">&lt;-</span> <span class="fu"><a href="../reference/get_recorddata.html">get_recorddata</a></span>(<span class="kw">dataProcessIds</span> <span class="kw">=</span> <span class="fl">9</span>, <span class="co"># Register</span>
                      <span class="kw">startYear</span> <span class="kw">=</span> <span class="fl">1920</span>,
                      <span class="kw">endYear</span> <span class="kw">=</span> <span class="fl">2020</span>,
                      <span class="kw">indicatorTypeIds</span> <span class="kw">=</span> <span class="fl">14</span>, <span class="co"># Births by sex</span>
                      <span class="kw">isComplete</span> <span class="kw">=</span> <span class="fl">2</span>, <span class="co"># Total</span>
                      <span class="kw">locIds</span> <span class="kw">=</span> <span class="fl">28</span>, <span class="co"># Antigua and Barbuda</span>
                      <span class="kw">locAreaTypeIds</span> <span class="kw">=</span> <span class="fl">2</span>, <span class="co"># Whole area</span>
                      <span class="kw">subGroupIds</span> <span class="kw">=</span> <span class="fl">2</span>) <span class="co"># Total</span>
<span class="co">#&gt; [1] "http://24.239.36.16:9654/un3/api/structureddatarecords?dataProcessIds=9&amp;startYear=1920&amp;endYear=2020&amp;indicatorTypeIds=14&amp;isComplete=2&amp;locIds=28&amp;locAreaTypeIds=2&amp;subGroupIds=2"</span></pre></body></html></div>
</div>
<div id="base-r" class="section level4">
<h4 class="hasAnchor">
<a href="#base-r" class="anchor"></a>Base R</h4>
<p>You can use <code>print_labels</code> from <code>haven</code> on the column of interest and it will show you the ID:</p>
<div class="sourceCode" id="cb14"><html><body><pre class="r"><span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="no">haven</span>)
<span class="fu"><a href="https://haven.tidyverse.org/reference/print_labels.html">print_labels</a></span>(<span class="no">res</span>$<span class="no">LocName</span>)
<span class="co">#&gt; </span>
<span class="co">#&gt; Labels:</span>
<span class="co">#&gt;                value label</span>
<span class="co">#&gt;  Antigua and Barbuda    28</span></pre></body></html></div>
<p>If you want to flip the labels for the entire data frame such that the ID is current value and not the name, you can do that with <code>as_factor</code>:</p>
<div class="sourceCode" id="cb15"><html><body><pre class="r"><span class="no">res_edit</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://haven.tidyverse.org/reference/as_factor.html">as_factor</a></span>(<span class="no">res</span>)

<span class="co"># No long showing the name but the ID</span>
<span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span>(<span class="no">res_edit</span>[<span class="st">"LocName"</span>])
<span class="co">#&gt;   LocName</span>
<span class="co">#&gt; 1      28</span>
<span class="co">#&gt; 2      28</span>
<span class="co">#&gt; 3      28</span>
<span class="co">#&gt; 4      28</span>
<span class="co">#&gt; 5      28</span>
<span class="co">#&gt; 6      28</span></pre></body></html></div>
</div>
<div id="tidyverse" class="section level4">
<h4 class="hasAnchor">
<a href="#tidyverse" class="anchor"></a>Tidyverse</h4>
<p>Using the tidyverse, the solution from base R applies as well. However, if you convert your data frame to a <code>tibble</code>, it will automatically show you the labels in the data frame.</p>
<div class="sourceCode" id="cb16"><html><body><pre class="r"><span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="no">tidyverse</span>)
<span class="co">#&gt; ── Attaching packages ─────────────────────────────────────── tidyverse 1.3.0 ──</span>
<span class="co">#&gt; ✔ ggplot2 3.3.1     ✔ purrr   0.3.4</span>
<span class="co">#&gt; ✔ tibble  3.0.1     ✔ dplyr   1.0.0</span>
<span class="co">#&gt; ✔ tidyr   1.1.0     ✔ stringr 1.4.0</span>
<span class="co">#&gt; ✔ readr   1.3.1     ✔ forcats 0.5.0</span>
<span class="co">#&gt; ── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──</span>
<span class="co">#&gt; ✖ dplyr::filter() masks stats::filter()</span>
<span class="co">#&gt; ✖ dplyr::lag()    masks stats::lag()</span>

<span class="no">res_tb</span> <span class="kw">&lt;-</span> <span class="no">res</span> <span class="kw">%&gt;%</span> <span class="fu">as_tibble</span>()
<span class="co"># See the code next to the name? No need to print it</span>
<span class="co"># separately, `tibble` print boths things together.</span>
<span class="no">res_tb</span> <span class="kw">%&gt;%</span>
  <span class="fu">select</span>(<span class="fu">ends_with</span>(<span class="st">"Name"</span>))
<span class="co">#&gt; # A tibble: 140 x 22</span>
<span class="co">#&gt;    IndicatorName LocName   LocTypeName RegName    AreaName   LocAreaTypeName</span>
<span class="co">#&gt;    &lt;chr+lbl&gt;     &lt;chr+lbl&gt; &lt;chr+lbl&gt;   &lt;chr+lbl&gt;  &lt;chr+lbl&gt;  &lt;chr+lbl&gt;      </span>
<span class="co">#&gt;  1 Total … [159] Ant… [28] Country [5] Car… [915] Lat… [904] Whole area [2] </span>
<span class="co">#&gt;  2 Total … [159] Ant… [28] Country [5] Car… [915] Lat… [904] Whole area [2] </span>
<span class="co">#&gt;  3 Total … [159] Ant… [28] Country [5] Car… [915] Lat… [904] Whole area [2] </span>
<span class="co">#&gt;  4 Total … [159] Ant… [28] Country [5] Car… [915] Lat… [904] Whole area [2] </span>
<span class="co">#&gt;  5 Total … [159] Ant… [28] Country [5] Car… [915] Lat… [904] Whole area [2] </span>
<span class="co">#&gt;  6 Total … [159] Ant… [28] Country [5] Car… [915] Lat… [904] Whole area [2] </span>
<span class="co">#&gt;  7 Total … [159] Ant… [28] Country [5] Car… [915] Lat… [904] Whole area [2] </span>
<span class="co">#&gt;  8 Total … [159] Ant… [28] Country [5] Car… [915] Lat… [904] Whole area [2] </span>
<span class="co">#&gt;  9 Total … [159] Ant… [28] Country [5] Car… [915] Lat… [904] Whole area [2] </span>
<span class="co">#&gt; 10 Total … [159] Ant… [28] Country [5] Car… [915] Lat… [904] Whole area [2] </span>
<span class="co">#&gt; # … with 130 more rows, and 16 more variables: SubGroupTypeName &lt;chr+lbl&gt;,</span>
<span class="co">#&gt; #   IndicatorShortName &lt;dbl&gt;, DataCatalogName &lt;chr&gt;,</span>
<span class="co">#&gt; #   DataCatalogShortName &lt;chr&gt;, DataSourceName &lt;chr&gt;,</span>
<span class="co">#&gt; #   DataSourceShortName &lt;chr&gt;, DataStatusName &lt;chr+lbl&gt;,</span>
<span class="co">#&gt; #   StatisticalConceptName &lt;chr+lbl&gt;, SexName &lt;chr+lbl&gt;,</span>
<span class="co">#&gt; #   DataTypeGroupName &lt;chr+lbl&gt;, DataTypeName &lt;chr+lbl&gt;,</span>
<span class="co">#&gt; #   ModelPatternFamilyName &lt;chr+lbl&gt;, ModelPatternName &lt;chr+lbl&gt;,</span>
<span class="co">#&gt; #   DataReliabilityName &lt;chr+lbl&gt;, PeriodTypeName &lt;chr+lbl&gt;,</span>
<span class="co">#&gt; #   PeriodGroupName &lt;chr+lbl&gt;</span></pre></body></html></div>
<p>If you’re interested in keeping either the codes or the names, you can do that with <code>as_factor</code>:</p>
<div class="sourceCode" id="cb17"><html><body><pre class="r"><span class="no">res_tb</span> <span class="kw">%&gt;%</span>
  <span class="co"># You can extract just the ID</span>
  <span class="fu"><a href="https://haven.tidyverse.org/reference/as_factor.html">as_factor</a></span>(<span class="kw">levels</span> <span class="kw">=</span> <span class="st">"labels"</span>) <span class="kw">%&gt;%</span>
  <span class="fu">select</span>(<span class="fu">ends_with</span>(<span class="st">"Name"</span>))
<span class="co">#&gt; # A tibble: 140 x 22</span>
<span class="co">#&gt;    IndicatorName LocName LocTypeName RegName AreaName LocAreaTypeName</span>
<span class="co">#&gt;    &lt;fct&gt;         &lt;fct&gt;   &lt;fct&gt;       &lt;fct&gt;   &lt;fct&gt;    &lt;fct&gt;          </span>
<span class="co">#&gt;  1 159           28      5           915     904      2              </span>
<span class="co">#&gt;  2 159           28      5           915     904      2              </span>
<span class="co">#&gt;  3 159           28      5           915     904      2              </span>
<span class="co">#&gt;  4 159           28      5           915     904      2              </span>
<span class="co">#&gt;  5 159           28      5           915     904      2              </span>
<span class="co">#&gt;  6 159           28      5           915     904      2              </span>
<span class="co">#&gt;  7 159           28      5           915     904      2              </span>
<span class="co">#&gt;  8 159           28      5           915     904      2              </span>
<span class="co">#&gt;  9 159           28      5           915     904      2              </span>
<span class="co">#&gt; 10 159           28      5           915     904      2              </span>
<span class="co">#&gt; # … with 130 more rows, and 16 more variables: SubGroupTypeName &lt;fct&gt;,</span>
<span class="co">#&gt; #   IndicatorShortName &lt;dbl&gt;, DataCatalogName &lt;chr&gt;,</span>
<span class="co">#&gt; #   DataCatalogShortName &lt;chr&gt;, DataSourceName &lt;chr&gt;,</span>
<span class="co">#&gt; #   DataSourceShortName &lt;chr&gt;, DataStatusName &lt;fct&gt;,</span>
<span class="co">#&gt; #   StatisticalConceptName &lt;fct&gt;, SexName &lt;fct&gt;, DataTypeGroupName &lt;fct&gt;,</span>
<span class="co">#&gt; #   DataTypeName &lt;fct&gt;, ModelPatternFamilyName &lt;fct&gt;, ModelPatternName &lt;fct&gt;,</span>
<span class="co">#&gt; #   DataReliabilityName &lt;fct&gt;, PeriodTypeName &lt;fct&gt;, PeriodGroupName &lt;fct&gt;</span></pre></body></html></div>
<div class="sourceCode" id="cb18"><html><body><pre class="r"><span class="no">res_tb</span> <span class="kw">%&gt;%</span>
  <span class="co"># Or just the values</span>
  <span class="fu"><a href="https://haven.tidyverse.org/reference/as_factor.html">as_factor</a></span>(<span class="kw">levels</span> <span class="kw">=</span> <span class="st">"values"</span>) <span class="kw">%&gt;%</span>
  <span class="fu">select</span>(<span class="fu">ends_with</span>(<span class="st">"Name"</span>))
<span class="co">#&gt; # A tibble: 140 x 22</span>
<span class="co">#&gt;    IndicatorName LocName LocTypeName RegName AreaName LocAreaTypeName</span>
<span class="co">#&gt;    &lt;fct&gt;         &lt;fct&gt;   &lt;fct&gt;       &lt;fct&gt;   &lt;fct&gt;    &lt;fct&gt;          </span>
<span class="co">#&gt;  1 Total births  Antigu… Country     Caribb… Latin A… Whole area     </span>
<span class="co">#&gt;  2 Total births  Antigu… Country     Caribb… Latin A… Whole area     </span>
<span class="co">#&gt;  3 Total births  Antigu… Country     Caribb… Latin A… Whole area     </span>
<span class="co">#&gt;  4 Total births  Antigu… Country     Caribb… Latin A… Whole area     </span>
<span class="co">#&gt;  5 Total births  Antigu… Country     Caribb… Latin A… Whole area     </span>
<span class="co">#&gt;  6 Total births  Antigu… Country     Caribb… Latin A… Whole area     </span>
<span class="co">#&gt;  7 Total births  Antigu… Country     Caribb… Latin A… Whole area     </span>
<span class="co">#&gt;  8 Total births  Antigu… Country     Caribb… Latin A… Whole area     </span>
<span class="co">#&gt;  9 Total births  Antigu… Country     Caribb… Latin A… Whole area     </span>
<span class="co">#&gt; 10 Total births  Antigu… Country     Caribb… Latin A… Whole area     </span>
<span class="co">#&gt; # … with 130 more rows, and 16 more variables: SubGroupTypeName &lt;fct&gt;,</span>
<span class="co">#&gt; #   IndicatorShortName &lt;dbl&gt;, DataCatalogName &lt;chr&gt;,</span>
<span class="co">#&gt; #   DataCatalogShortName &lt;chr&gt;, DataSourceName &lt;chr&gt;,</span>
<span class="co">#&gt; #   DataSourceShortName &lt;chr&gt;, DataStatusName &lt;fct&gt;,</span>
<span class="co">#&gt; #   StatisticalConceptName &lt;fct&gt;, SexName &lt;fct&gt;, DataTypeGroupName &lt;fct&gt;,</span>
<span class="co">#&gt; #   DataTypeName &lt;fct&gt;, ModelPatternFamilyName &lt;fct&gt;, ModelPatternName &lt;fct&gt;,</span>
<span class="co">#&gt; #   DataReliabilityName &lt;fct&gt;, PeriodTypeName &lt;fct&gt;, PeriodGroupName &lt;fct&gt;</span></pre></body></html></div>
</div>
</div>
<div id="exploring-the-unpd-sql-api-from-r" class="section level2">
<h2 class="hasAnchor">
<a href="#exploring-the-unpd-sql-api-from-r" class="anchor"></a>Exploring the UNPD SQL API from R</h2>
<p>The previous examples assume you’re familiar with the names or codes of the parameters of the API: locations, subgroups, etc… Whenever you don’t know these values, you need to resort to the list of available values. Each parameter defined above has an equivalent <code>get_*</code> function to extract all possible values. The current list is:</p>
<ul>
<li>dataProcessIds = <code><a href="../reference/get_dataprocess.html">get_dataprocess()</a></code>
</li>
<li>indicatorTypeIds = <code><a href="../reference/get_indicatortypes.html">get_indicatortypes()</a></code>
</li>
<li>locIds = <code><a href="../reference/get_locations.html">get_locations()</a></code>
</li>
<li>locAreaTypeIds = <code><a href="../reference/get_locationtypes.html">get_locationtypes()</a></code>
</li>
<li>subGroupIds = <code><a href="../reference/get_subgroups.html">get_subgroups()</a></code>
</li>
<li>isComplete = <code>"Abridged"</code>, <code>"Complete"</code> or <code>"Total"</code>
</li>
</ul>
<p>For example, to see all possible indicator types:</p>
<div class="sourceCode" id="cb19"><html><body><pre class="r"><span class="fu"><a href="../reference/get_indicatortypes.html">get_indicatortypes</a></span>()</pre></body></html></div>
<p>Here we can see both the <strong>code</strong> and the <strong>name</strong> of the indicator. Both values are accepted by <code>get_recorddata</code>. Another example is getting the list of location types. <code><a href="../reference/get_locationtypes.html">get_locationtypes()</a></code> will give you those:</p>
<div class="sourceCode" id="cb20"><html><body><pre class="r"><span class="fu"><a href="../reference/get_locationtypes.html">get_locationtypes</a></span>()
<span class="co">#&gt; [1] "http://24.239.36.16:9654/un3/api/locareatypes?"</span>
<span class="co">#&gt;    PK_LocAreaTypeID                           Name</span>
<span class="co">#&gt; 1                 0 Unknown location type/category</span>
<span class="co">#&gt; 2                 1                 Not applicable</span>
<span class="co">#&gt; 3                 2                     Whole area</span>
<span class="co">#&gt; 4                 3                          Urban</span>
<span class="co">#&gt; 5                 4                          Rural</span>
<span class="co">#&gt; 6                 5                     Semi-rural</span>
<span class="co">#&gt; 7                 6                     Semi-urban</span>
<span class="co">#&gt; 8                20                Reporting Areas</span>
<span class="co">#&gt; 9                30                           Part</span>
<span class="co">#&gt; 10               35 Selected Urban and Rural Areas</span>
<span class="co">#&gt; 11               41           Selected Rural Areas</span>
<span class="co">#&gt; 12               51           Selected Urban Areas</span>
<span class="co">#&gt; 13               70                         Cities</span>
<span class="co">#&gt;                         ShortName                       LongName SortOrder</span>
<span class="co">#&gt; 1  Unknown location type/category Unknown location type/category         1</span>
<span class="co">#&gt; 2                  Not applicable                 Not applicable         2</span>
<span class="co">#&gt; 3                      Whole area                     Whole area         3</span>
<span class="co">#&gt; 4                     Urban areas                    Urban areas         4</span>
<span class="co">#&gt; 5                     Rural areas                    Rural areas         5</span>
<span class="co">#&gt; 6                      Semi-rural                     Semi-rural         6</span>
<span class="co">#&gt; 7                      Semi-urban                     Semi-urban         7</span>
<span class="co">#&gt; 8                 Reporting Areas                Reporting Areas         8</span>
<span class="co">#&gt; 9                            Part                           Part         9</span>
<span class="co">#&gt; 10 Selected Urban and Rural Areas Selected Urban and Rural Areas        10</span>
<span class="co">#&gt; 11           Selected Rural Areas           Selected Rural Areas        11</span>
<span class="co">#&gt; 12           Selected Urban Areas           Selected Urban Areas        12</span>
<span class="co">#&gt; 13                         Cities                         Cities        13</span>
<span class="co">#&gt;          Description isActive isDefault</span>
<span class="co">#&gt; 1                       FALSE     FALSE</span>
<span class="co">#&gt; 2                       FALSE     FALSE</span>
<span class="co">#&gt; 3        Formerly 23     TRUE      TRUE</span>
<span class="co">#&gt; 4        Formerly 16     TRUE     FALSE</span>
<span class="co">#&gt; 5        Formerly 17     TRUE     FALSE</span>
<span class="co">#&gt; 6        Formerly 21    FALSE     FALSE</span>
<span class="co">#&gt; 7        Formerly 22    FALSE     FALSE</span>
<span class="co">#&gt; 8  WHO-DB subdiv=A20    FALSE     FALSE</span>
<span class="co">#&gt; 9  WHO-DB subdiv=A30    FALSE     FALSE</span>
<span class="co">#&gt; 10 WHO-DB subdiv=A35    FALSE     FALSE</span>
<span class="co">#&gt; 11 WHO-DB subdiv=A41    FALSE     FALSE</span>
<span class="co">#&gt; 12 WHO-DB subdiv=A51    FALSE     FALSE</span>
<span class="co">#&gt; 13 WHO-DB subdiv=A70    FALSE     FALSE</span></pre></body></html></div>
<p>In order to search for a specificic combination of values (<code>"Egypt"</code>, <code>"Deaths by age and sex"</code>, etc…), the process is only possible through trial and error. For example, if we wanted to explore <code>Deaths by age and sex</code> for <code>Oman</code>, we’d have to explore whether there is data for <code>Semi-rural</code> (<code>locAreaTypeIds</code>) and <code>Christian Orthodox</code> (<code>subGroupIds</code>). Since this exploration process is a bit cumbersome, we’re currently developing a new strategy for exploring country/indicator pairs that will be more intuitive.</p>
<p>For now, let’s try this example for <code>"Semi-rural"</code>:</p>
<div class="sourceCode" id="cb21"><html><body><pre class="r"><span class="fu"><a href="../reference/get_recorddata.html">get_recorddata</a></span>(<span class="kw">dataProcessIds</span> <span class="kw">=</span> <span class="st">"Register"</span>,
               <span class="kw">indicatorTypeIds</span> <span class="kw">=</span> <span class="st">"Deaths by age and sex"</span>,
               <span class="kw">locIds</span> <span class="kw">=</span> <span class="st">"Oman"</span>,
               <span class="kw">locAreaTypeIds</span> <span class="kw">=</span> <span class="st">"Semi-rural"</span>,
               <span class="kw">subGroupIds</span> <span class="kw">=</span> <span class="st">"Total or All groups"</span>,
               <span class="kw">isComplete</span> <span class="kw">=</span> <span class="st">"Abridged"</span>)
<span class="co">#&gt; [1] "http://24.239.36.16:9654/un3/api/locations?"</span>
<span class="co">#&gt; [1] "http://24.239.36.16:9654/un3/api/indicatortypes?"</span>
<span class="co">#&gt; [1] "http://24.239.36.16:9654/un3/api/subgroups?"</span>
<span class="co">#&gt; [1] "http://24.239.36.16:9654/un3/api/locareatypes?indicatorTypeIds=20&amp;isComplete=0&amp;locIds=512"</span>
<span class="co">#&gt; Error in fun(vec, ...): Area Type(s) 'Semi-rural' not found. Check get_locationtypes()</span></pre></body></html></div>
<p>This error is just saying that the combination of data that you’ve specified is not available (in this case, <code>Semi-rural</code> is not available for register data on deaths by age and sex in <code>Oman</code> for all groups abridged).</p>
<p>Figuring out which specific set of values returns what the user want is a tedious process. If the user doesn’t know the specific combination of values by memory, the most optimal strategy that we advise is to explore the available values in the <a href="http://24.239.36.16:9654/un3/Web/index.html">front end of the API</a> and then use these in the request.</p>
<p>Let’s do one example. Follow the hyperlink and click on <code>"Get Started - Select Indicator &amp; Country"</code>. Then select <code>"Deaths by age and sex"</code> -&gt; <code>"Oman"</code>. All possible datasets for <code>Oman</code> and <code>"Deaths by age and sex"</code> will appear automatically. We can filter down the options in the left-most menu and use these values to populate our <code>get_recorddata</code> call.</p>
<p>Looking at the possible values of <code>"Type of location"</code>, only <code>"Whole area"</code> is available. This means that we can’t specify <code>"Semi-rural"</code> (as we saw in the example above). Looking at <code>"Type of subgroup"</code>, the only available group is <code>Total or All groups</code>, meaning that we can’t specify <code>"Christian Orthodox"</code> either.</p>
<p>Using this strategy is much easier and less time consuming that trying out different values. As outlined above, this strategy will not be necessary in the near future as we develop a quick strategy for exploring data from R.</p>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by Tim Riffe, Marius D. Pascariu, Jorge Cimentada.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.5.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
